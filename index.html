<!-- Second Sphere JS moved to end of body for proper DOM access -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Orbiq Launcher</title>
  <meta name="description" content="An animated one‑page experience — red/black theme, draggable icon orb, target lock, image‑first panels." />
  <!-- Copied metadata from OldWebsite for improved SEO/social cards -->
  <meta name="keywords" content="Orbiq, free desktop launcher, 3D desktop launcher Windows, desktop shortcut manager, sphere launcher, productivity software" />
  <meta name="author" content="Orbiq - JodyLabs">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="language" content="en-US">
  <meta name="rating" content="general">
  <meta name="distribution" content="global">

  <!-- Enhanced SEO and App metadata -->
  <meta name="application-name" content="Orbiq Desktop Launcher">
  <meta name="msapplication-tooltip" content="Revolutionary 3D desktop launcher for Windows productivity">
  <meta name="price" content="Free">
  <meta name="priceCurrency" content="USD">
  <meta name="software-version" content="1.8">
  <meta name="operating-system" content="Windows 10, Windows 11">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://passghost.github.io/OrbiqWebsite/">
  <meta property="og:title" content="Orbiq - The launcher your desktop's been dreaming of">
  <meta property="og:description" content="A beautiful, vanishing portal to your most-used files. Productivity meets elegance — summon your workspace with one hotkey.">
  <meta property="og:image" content="https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="628">
  <meta property="og:site_name" content="Orbiq">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://passghost.github.io/OrbiqWebsite/">
  <meta name="twitter:title" content="Orbiq - 3D Desktop Launcher for Windows">
  <meta name="twitter:description" content="Transform your desktop with Orbiq's elegant 3D sphere launcher. Free for personal use, perfect for productivity.">
  <meta name="twitter:image" content="https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png">

  <!-- Canonical and favicons -->
  <link rel="canonical" href="https://passghost.github.io/OrbiqWebsite/">
  <link rel="icon" type="image/png" sizes="32x32" href="Images/SphereIcon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="Images/SphereIcon.png">
  <link rel="apple-touch-icon" href="Images/SphereIcon.png">

  <!-- Schema.org structured data (basic) -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"SoftwareApplication","name":"Orbiq - 3D Desktop Launcher","url":"https://passghost.github.io/OrbiqWebsite/","description":"Orbiq is a lightweight 3D sphere launcher for Windows that boosts productivity with instant hotkey access and a beautiful UI.","applicationCategory":"ProductivityApplication","operatingSystem":"Windows 10, Windows 11","softwareVersion":"1.8"}
  </script>
  <style>
    /* --- RESET --- */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial; background:#0a0a0c;color:#f4f4f5;overflow-x:hidden}
    h1,h2,h3,p{margin:0}
    a{color:inherit;text-decoration:none}

    :root{
      --accent:#6C63FF; /* main accent: soft indigo */
      --accent-2:#48C9B0; /* secondary accent: teal */
      --text:#F3F3F7;
      --muted:#A3A3B3;
      --panel:#232347ee;
      --card:#1B1B2A;
      --glass:rgba(108,99,255,.08);
      --radius:22px;
      --shadow:0 12px 28px rgba(108,99,255,.18), inset 0 1px 0 rgba(255,255,255,.04);
    }

    body{background:#18182A;color:var(--text)}
    /* --- Background --- */
    #bg {position:fixed;inset:0;z-index:-1;background:
      radial-gradient(1200px 800px at 80% -10%, rgba(108,99,255,.16), rgba(108,99,255,0) 60%),
      radial-gradient(900px 600px at 10% 120%, rgba(72,201,176,.12), rgba(72,201,176,0) 55%),
      linear-gradient(180deg,#18182A 0%,#232347 100%);
    }

    /* --- Top bar --- */
    .topbar{position:fixed;top:12px;left:12px;right:12px;display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-radius:16px;background:var(--glass);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:var(--shadow);z-index:40}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:30px;height:30px;border-radius:50%;overflow:hidden;display:grid;place-items:center;background:conic-gradient(from 220deg, var(--accent), var(--accent-2), var(--accent)); box-shadow:0 0 40px rgba(108,99,255,.35)}
    .logo img{width:100%;height:100%;object-fit:cover;filter:drop-shadow(0 0 12px rgba(108,99,255,.25))}
    .brand h3{font-weight:800;letter-spacing:.4px}
    .pill{font-size:12px;color:var(--muted);padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.06)}
    .cta{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(90deg,var(--accent),var(--accent-2));padding:10px 14px;border-radius:999px;color:#18182A;font-weight:800;border:none;box-shadow:0 10px 26px rgba(108,99,255,.18);cursor:pointer}
    .cta:hover{background:linear-gradient(90deg,var(--accent-2),var(--accent));color:#232347}

    /* --- Hero --- */
    .hero{min-height:100svh;display:grid;place-items:center;padding:120px 20px 80px}
    .hero-inner{max-width:1200px;width:100%;display:grid;grid-template-columns:1.05fr .95fr;gap:28px;align-items:center}
    .headline{font-size:clamp(32px,6vw,64px);line-height:1.06;font-weight:900;letter-spacing:.2px}
    .headline .accent{background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .sub{margin-top:14px;color:var(--muted);font-size:clamp(14px,2vw,18px)}
    .hero-card{background:var(--glass);border:1px solid rgba(108,99,255,.10);box-shadow:var(--shadow)}
    .badges{display:flex;flex-wrap:wrap;gap:10px;margin-top:16px}
    .badge{padding:8px 10px;border-radius:999px;background:rgba(108,99,255,.10);border:1px solid rgba(108,99,255,.18);font-size:13px;color:#fff}

    /* --- Orbital stage (CENTERED SPHERE) --- */
    .stage{position:relative;min-height:520px;perspective:1200px;display:grid;place-items:center}
    .orbit-wrap{position:relative;width:min(90vw,680px);height:min(90vw,680px);max-width:700px;max-height:700px;transform-style:preserve-3d;user-select:none}
    .ring{position:relative;width:100%;height:100%;display:grid;place-items:center;transform-style:preserve-3d}
  .ring::before{content:"";position:absolute;inset:0;border-radius:50%;border:1.5px dashed rgba(255,255,255,.08);z-index:3;pointer-events:none}
  :root{--floatback-fallback:#3b82f6}
  .ring-bg{position:absolute;inset:12%;border-radius:50%;background-image:url('Images/floatback.gif');background-position:center;background-size:cover;background-repeat:no-repeat;background-color:var(--floatback-fallback);opacity:1;transition:opacity .25s ease;mix-blend-mode:normal;z-index:0;pointer-events:none}
    /* Target indicator */

    /* Orbiq tag */
    .orbiq-tag {
      position: fixed;
      left: 24px;
      bottom: 24px;
      background: rgba(72,201,176,0.92);
      color: #232347;
      font-family: inherit;
      font-size: 1rem;
      padding: 10px 22px 10px 18px;
      border-radius: 18px 8px 18px 8px;
      box-shadow: 0 2px 12px 0 rgba(0,0,0,0.18);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 100;
      letter-spacing: 0.02em;
      text-decoration: none;
      transition: background .2s;
    }
    .orbiq-tag:hover {
      background: #48C9B0;
      color: #fff;
    }
  /* Removed unused target styles */

    .node{position:absolute;left:50%;top:50%;display:flex;flex-direction:column;align-items:center;gap:10px;transform-style:preserve-3d}
  .node button{width:84px;height:84px;border:none;border-radius:50%;padding:0;background:transparent;background-size:cover;background-position:center;box-shadow:none;cursor:pointer;display:grid;place-items:center;position:relative;overflow:hidden;transition:transform .2s ease, box-shadow .2s ease}
  .node button::after{content:"";display:none;}
    .node button .label{position:absolute;bottom:-6px;left:50%;transform:translateX(-50%);font-size:12px;color:#fff;background:rgba(0,0,0,.4);padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.1)}
    .node *, .node img, .node button { backface-visibility: hidden; -webkit-backface-visibility: hidden; transform-style: preserve-3d; }
    .node.hit button{box-shadow:0 20px 40px rgba(255,26,26,.25);transform:translateZ(6px)}

    .hint{position:absolute;bottom:8px;left:0;right:0;text-align:center;color:var(--muted);font-size:12px;opacity:.8}

    /* --- Panels --- */
    .panel{position:fixed;inset:auto 14px 14px 14px;top:80px;max-width:980px;margin:0 auto;background:var(--panel);border:1px solid rgba(108,99,255,.10);border-radius:24px;box-shadow:var(--shadow);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);transform-origin:var(--x,50%) var(--y,50%); transform:scale(.9) translateY(8px);opacity:0;pointer-events:none;transition:opacity .35s ease, transform .35s ease;z-index:50}
    .panel.open{opacity:1;transform:scale(1) translateY(0);pointer-events:auto}
    .panel header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.06)}
    .panel header h3{font-weight:800}
    .panel .content{padding:18px;display:grid;gap:12px}
    .panel .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
    .card{background:var(--card);border:1px solid rgba(108,99,255,.10);border-radius:18px;padding:14px;box-shadow:var(--shadow);color:var(--text)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:12px;margin-bottom:10px;box-shadow:0 2px 8px rgba(108,99,255,0.10)}
    .close{background:transparent;border:1px solid rgba(108,99,255,.18);color:var(--text);border-radius:12px;padding:8px 10px;cursor:pointer}

    /* --- Footer --- */
    .footer{padding:40px 20px 70px;text-align:center;color:var(--muted)}

    /* --- Responsive --- */
    @media (max-width: 920px){
      .hero-inner{grid-template-columns:1fr;gap:20px}
      .stage{min-height:460px}
      .target{right:1.5%}
    }
    @media (max-width: 560px){
      .headline{font-size:clamp(28px,8vw,44px)}
      .topbar{top:8px;left:8px;right:8px;padding:8px 10px}
      .hero{padding:96px 14px 60px}
      .panel{left:8px;right:8px;top:72px;border-radius:18px}
      .node button{width:70px;height:70px}
      .card img{height:120px}
      .badge{font-size:12px}
  /* Removed unused target styles in media query */
    }
    @media (prefers-reduced-motion: reduce){
      .ring::before{animation:none}
    }
  </style>
    <style>
      body {
        background: linear-gradient(120deg, #181a2a 0%, #23243a 100%);
        color: #eaf6fb;
        font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
        margin: 0;
        min-height: 100vh;
      }
      .stage {
        background: rgba(30,34,54,0.7);
        border-radius: 32px;
        box-shadow: 0 8px 32px rgba(0,234,255,0.08);
        padding: 32px 0 48px 0;
        margin-bottom: 48px;
      }
      .orbit-wrap {
        margin: 0 auto;
        max-width: 700px;
        max-height: 700px;
        width: min(90vw,680px);
        height: min(90vw,680px);
        background: none;
      }
      .ring {
        width: 100%;
        height: 100%;
        position: relative;
        display: grid;
        place-items: center;
        transform-style: preserve-3d;
      }
      .ring-bg {
  position: absolute;
  inset: 12%;
  border-radius: 50%;
  background: url('Images/floatback.gif') center center/cover no-repeat;
  filter: blur(8px) saturate(120%);
  opacity: .32;
  transition: opacity .25s ease;
  mix-blend-mode: screen;
  pointer-events: none;
      }

      /* Second orb custom animation */
    /* Ring background visuals (use CSS vars for transform so JS can control smoothly) */
    .ring-bg{
  --bg-rotate: 0deg;
  --bg-scale: 1;
  background-position:center center;
  background-size:cover;
  background-repeat:no-repeat;
  filter: blur(8px) saturate(120%);
  opacity: .32;
  transition: opacity .25s ease, transform 220ms linear;
  mix-blend-mode: screen;
  transform: rotate(var(--bg-rotate)) scale(var(--bg-scale));
    }

  #ringBg2 { background-image: url('Images/Hypno.gif'); }
  #ringBg { background-image: url('Images/floatback.gif'); }
  /* Defensive: ensure specific ring background layers never capture pointer events */
  #ringBg, #ringBg2 { pointer-events: none; }
      .node button {
        width: 84px;
        height: 84px;
        border: none;
        border-radius: 50%;
        background: transparent;
        background-size: cover;
        background-position: center;
        box-shadow: 0 2px 12px rgba(0,234,255,0.12);
        cursor: pointer;
        display: grid;
        place-items: center;
        position: relative;
        overflow: hidden;
        transition: transform .2s, box-shadow .2s;
      }
      .node button .label {
        position: absolute;
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 13px;
        color: #eaf6fb;
        background: rgba(0,0,0,.4);
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,.1);
        box-shadow: 0 2px 8px rgba(0,234,255,0.10);
    }

    /* --------------- Added overrides: force download icon sizing and center download title --------------- */
    .download-section, .download-options { text-align: center; }
    .download-section h2 { text-align: center; }
    .download-header { display: flex; align-items: center; gap:12px; justify-content:center; }
    .download-header img, .download-option img, .download-card img { width:64px !important; height:64px !important; object-fit:contain !important; }
    .hero .download-buttons img { width:40px !important; height:40px !important; }
    .card img, .demo-gif { max-width:100%; height:auto; object-fit:cover; }
      .hint {
        position: absolute;
        bottom: 8px;
        left: 0;
        right: 0;
        text-align: center;
        color: #7fd7ff;
        font-size: 13px;
        opacity: .8;
        letter-spacing: 0.5px;
      }
      /* Ensure accessible cards (rendered under the second sphere) are above decorative orbit layers
         so their buttons receive clicks. */
      #accessibleCards {
        position: relative;
        z-index: 9999 !important;
        pointer-events: auto !important;
      }
      #expandedCard, #expandedFeatureCard {
        background: rgba(30,34,54,0.92);
        border-radius: 24px;
        box-shadow: 0 8px 32px rgba(0,234,255,0.12);
        padding: 32px 28px;
        color: #eaf6fb;
        font-size: 1.08rem;
        min-height: 120px;
        margin-bottom: 24px;
      }
      .card {
        background: rgba(40,44,64,0.98);
        border-radius: 18px;
        box-shadow: 0 2px 12px rgba(0,234,255,0.10);
        padding: 18px;
        margin-bottom: 18px;
        color: #eaf6fb;
      }
      .card img {
        width: 100%;
        height: 140px;
        object-fit: cover;
        border-radius: 12px;
        margin-bottom: 10px;
        box-shadow: 0 2px 8px rgba(0,234,255,0.10);
      }
      .cta {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(90deg,#00eaff,#7fd7ff);
        padding: 10px 18px;
        border-radius: 999px;
        color: #181a2a;
        font-weight: 800;
        border: none;
        box-shadow: 0 10px 26px rgba(0,234,255,.18);
        cursor: pointer;
        font-size: 1rem;
        margin-top: 12px;
        text-decoration: none;
      }
      .cta:hover {
        background: linear-gradient(90deg,#7fd7ff,#00eaff);
        color: #23243a;
      }
      @media (max-width: 700px) {
        .stage { padding: 18px 0 32px 0; }
        #expandedCard, #expandedFeatureCard { padding: 18px 8px; }
        .card img { height: 100px; }
      }
    </style>
</head>
<body>
  <canvas id="bg"></canvas>

  <nav class="topbar" aria-label="Primary">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <img src="https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png" alt="JodyLabs logo" />
      </div>
      <h3>JodyLabs</h3>
      <span class="pill">Interactive R&D</span>
    </div>
    <button class="cta" id="contactOpen" aria-haspopup="dialog" aria-controls="panel-contact">Contact</button>
  </nav>

  <main class="hero">
    <section class="hero-inner" style="display:grid;grid-template-columns:380px 1fr;gap:40px;align-items:start;max-width:1200px;margin:0 auto;">
      <aside class="sidebar" style="position:sticky;top:70px;align-self:start;display:flex;flex-direction:column;gap:28px;">
  <h1 class="headline" style="text-align:left;">Orbiq<br><span class="accent">The <span style="color:var(--accent-2);font-weight:600;opacity:0.85;font-family:'Inter', 'Segoe UI', Arial, sans-serif;font-style:italic;">FREE</span> launcher your desktop's been dreaming of.</span></h1>
        <p class="sub" style="text-align:left;max-width:340px;">A beautiful, vanishing portal to your most-used files. Productivity meets elegance — summon your workspace with one hotkey. Not a dock. Not a widget. Something better.</p>
        <div class="badges" aria-hidden="true" style="justify-content:flex-start;">
          <span class="badge">New in v1.8</span>
          <span class="badge">Multiple Collections</span>
          <span class="badge">Auto-Start</span>
        </div>
        <a class="cta" href="https://drive.google.com/file/d/1rF6m6Wn5T2cE_3pd8XRgsGF-U6EIQD-0/view?usp=drive_link" target="_blank" style="align-self:flex-start;">Download Orbiq 0.8 MB - Windows Installer</a>
  <!-- Only spheres and their expanded cards are shown below -->
      </aside>

      <div style="display:flex;flex-direction:column;gap:40px;">
        <div class="hero-card stage" aria-label="Icon orb interface" style="position:relative;z-index:10;">
          <div class="orbit-wrap" id="orbit" aria-live="polite" style="position:sticky;top:80px;">
            <div class="ring" id="ring">
              <div class="ring-bg" id="ringBg"></div>
            </div>
            <p class="hint">3D Rotating Sphere — Drag to rotate</p>
          </div>
        </div>
      </div>
    </section>
      <!-- SECOND SPHERE: All content below Key Features is now inside this interactive orb -->
      <section class="hero-card stage" aria-label="Content orb interface" style="position:relative;z-index:10;margin:80px auto 0;max-width:1200px;">
        <div class="orbit-wrap" id="orbit2" aria-live="polite" style="position:sticky;top:80px;z-index:1;opacity:0.55;">
          <div class="ring" id="ring2">
            <div class="ring-bg" id="ringBg2"></div>
            <div id="jodylabs-title" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;pointer-events:none;">
              <span style="display:inline-block;padding:16px 38px;font-size:2.2rem;font-weight:800;color:#fff;background:rgba(72,201,176,0.18);backdrop-filter:blur(12px);border-radius:18px;box-shadow:0 2px 18px 0 rgba(72,201,176,0.18);letter-spacing:0.04em;text-shadow:0 2px 18px #232347;">JodyLabs</span>
            </div>
          </div>
          <p class="hint">Content Sphere — Drag to rotate, click to expand</p>
        </div>
        <!-- Accessible Cards Display: show all cards below the wheel for quick access -->
        <div id="accessibleCards" style="margin:40px auto 0;max-width:900px;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:24px;z-index:2;position:relative;"></div>
      </section>

  <!-- Removed Screenshots and Download Sections for cleaner layout -->

  <section class="panel" id="panel-experiments" role="dialog" aria-modal="true" aria-labelledby="panel-experiments-title">
    <header>
      <h3 id="panel-experiments-title">Experiments</h3>
      <button class="close" data-close>Close</button>
    </header>
    <div class="content">
      <div class="grid">
        <article class="card"><img src="https://passghost.github.io/jodylabs/Images/rededge.png" alt="Red edge"><h4>Grid Glitch</h4><p>CSS-only aurora lighting with conic gradients.</p></article>
        <article class="card"><img src="https://passghost.github.io/jodylabs/Images/Snip/EyeballM3.png" alt="Eyeball"><h4>Edge‑Aware Pixel Heli</h4><p>Tiny canvas toy that knows its bounds.</p></article>
        <article class="card"><img src="https://passghost.github.io/jodylabs/screenshots/CardCake.png" alt="CardCake"><h4>LLM Prompter</h4><p>In‑browser prompt macros & tokens playground.</p></article>
      </div>
    </div>
  </section>

  <section class="panel" id="panel-tools" role="dialog" aria-modal="true" aria-labelledby="panel-tools-title">
    <header>
      <h3 id="panel-tools-title">Tools</h3>
      <button class="close" data-close>Close</button>
    </header>
    <div class="content">
      <div class="grid">
        <article class="card"><img src="https://passghost.github.io/jodylabs/Images/rededge.png" alt="Red"><h4>Download</h4><p>Link your latest launcher build here.</p></article>
        <article class="card"><img src="https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png" alt="Sphere"><h4>Docs</h4><p>Quick start, hotkeys, theming, FAQ.</p></article>
        <article class="card"><img src="https://passghost.github.io/jodylabs/Images/Snip/EyeballM3.png" alt="Eyeball"><h4>Press Kit</h4><p>Logos, screenshots, and a one‑pager.</p></article>
      </div>
    </div>
  </section>

  <section class="panel" id="panel-content" role="dialog" aria-modal="true" aria-labelledby="panel-content-title">
    <header>
      <h3 id="panel-content-title">Content</h3>
      <button class="close" data-close>Close</button>
    </header>
    <div class="content">
      <div id="panel-content-inner"></div>
    </div>
  </section>

  <section class="panel" id="panel-contact" role="dialog" aria-modal="true" aria-labelledby="panel-contact-title">
    <header>
      <h3 id="panel-contact-title">Contact</h3>
      <button class="close" data-close>Close</button>
    </header>
      <div class="content" style="display:flex;align-items:center;justify-content:center;min-height:80px;">
        <div style="background:rgba(72,201,176,0.92);color:#232347;padding:18px 32px;border-radius:16px;box-shadow:0 2px 12px 0 rgba(0,0,0,0.18);font-size:1.1rem;font-weight:600;letter-spacing:0.02em;">pass6host@gmail.com</div>
      </div>
    </div>
  </section>

  <footer class="footer">© <span id="year"></span> JodyLabs • Built with vanilla HTML/CSS/JS.
  </footer>

  <!-- Sidebar Navigation -->
<aside style="position:fixed; left:0; top:0; height:100%; width:60px; background:linear-gradient(135deg,#32CD32,#8A2BE2); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:1000;">
  <a href="OldWebsite/index.html" style="writing-mode:vertical-rl; text-orientation:mixed; color:#fff; font-weight:bold; text-decoration:none; padding:10px; margin:20px 0; border-radius:8px; background:rgba(0,0,0,0.2); box-shadow:0 2px 8px rgba(50,205,50,0.2); transition:background 0.2s;">Old Site</a>
  <a href="license.html" style="writing-mode:vertical-rl; text-orientation:mixed; color:#fff; font-weight:bold; text-decoration:none; padding:10px; margin:20px 0; border-radius:8px; background:rgba(0,0,0,0.2); box-shadow:0 2px 8px rgba(50,205,50,0.2); transition:background 0.2s;">License</a>
  <a href="privacy.html" style="writing-mode:vertical-rl; text-orientation:mixed; color:#fff; font-weight:bold; text-decoration:none; padding:10px; margin:20px 0; border-radius:8px; background:rgba(0,0,0,0.2); box-shadow:0 2px 8px rgba(50,205,50,0.2); transition:background 0.2s;">Privacy</a>
  <a href="terms.html" style="writing-mode:vertical-rl; text-orientation:mixed; color:#fff; font-weight:bold; text-decoration:none; padding:10px; margin:20px 0; border-radius:8px; background:rgba(0,0,0,0.2); box-shadow:0 2px 8px rgba(50,205,50,0.2); transition:background 0.2s;">Terms</a>
  <a href="pro.html" style="writing-mode:vertical-rl; text-orientation:mixed; color:#fff; font-weight:bold; text-decoration:none; padding:10px; margin:20px 0; border-radius:8px; background:rgba(0,0,0,0.2); box-shadow:0 2px 8px rgba(50,205,50,0.2); transition:background 0.2s;">Pro</a>
</aside>

  <script>
  // SECOND SPHERE: Only icons and labels are shown in the orb, expanded card only for front-most
  const contentNodes = [
    {
      label: 'Download',
      icon: 'https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png',
      card: `<h2>Download Orbiq</h2><div class="card" style="max-width:420px;"><a href='https://drive.google.com/file/d/1rF6m6Wn5T2cE_3pd8XRgsGF-U6EIQD-0/view?usp=drive_link' target='_blank'><img src='https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png' alt='Installer' style='border-radius:12px;width:100%;height:140px;object-fit:cover;box-shadow:0 2px 8px rgba(0,234,255,0.10);'></a><h3>Windows Installer</h3><ul><li>Professional installation experience</li><li>Start Menu and Desktop shortcuts</li><li>Automatic uninstaller</li><li>Compact download size (0.8 MB)</li></ul><a class="cta" href='https://drive.google.com/file/d/1rF6m6Wn5T2cE_3pd8XRgsGF-U6EIQD-0/view?usp=drive_link' target='_blank'>Download Installer</a></div>`
    },
    {
      label: 'System Requirements',
  icon: 'Images/Hypno.gif',
      card: `<h2>System Requirements</h2><div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;"><div class="card"><h3>Minimum Requirements</h3><ul><li>Windows 10 (64-bit)</li><li>2 GB RAM</li><li>200 MB free disk space</li><li>DirectX 11 compatible graphics</li></ul></div><div class="card"><h3>Recommended</h3><ul><li>Windows 11 (64-bit)</li><li>4 GB RAM or more</li><li>500 MB free disk space</li><li>Dedicated graphics card</li></ul></div></div>`
    },
    {
      label: 'Orbiq Pro',
  icon: 'Images/Hypno.gif',
      card: `<h2>Want Even More Power?</h2><div class="card" style="max-width:420px;"><h3>Upgrade to Orbiq Pro</h3><p>Advanced features like wheel collections, custom hotkeys, position memory, and enhanced taskbar filtering.</p><ul><li>🎯 Wheel Collections</li><li>⌨️ Custom Hotkeys</li><li>📍 Position Memory</li><li>🎨 Professional UI</li></ul><a class="cta" href='https://passghost.github.io/OrbiqWebsite/pro.html' target='_blank'>Discover Orbiq Pro - $20.00</a><p style="margin-top:8px;font-size:13px;color:var(--muted);">One-time purchase • Regular updates included • Professional support</p></div>`
    },
    {
      label: 'Links',
  icon: 'Images/Hypno.gif',
      card: `<h2>Additional Links</h2><ul style="display:flex;flex-wrap:wrap;gap:18px;list-style:none;padding:0;margin:0;"><li><a href='https://passghost.github.io/OrbiqWebsite/#home' target='_blank'>Home</a></li><li><a href='https://passghost.github.io/OrbiqWebsite/#download' target='_blank'>Download</a></li><li><a href='https://passghost.github.io/OrbiqWebsite/#features' target='_blank'>Features</a></li><li><a href='https://passghost.github.io/OrbiqWebsite/#screenshots' target='_blank'>Screenshots</a></li><li><a href='https://www.paypal.com/donate/?business=TE5MW5QV6RRCS&no_recurring=1&item_name=Donations+encouraged%2C+but+of+course+not+expected.+Thanks+for+visiting!&currency_code=USD' target='_blank'>Support</a></li></ul>`
    }
  ];

  const ring2 = document.getElementById('ring2');
  const orbit2 = document.getElementById('orbit2');
  const expandedCard = document.getElementById('expandedCard');
  const TOTAL_CONTENT = contentNodes.length;
  const contentPoints = [];
  (function buildSphere2(){
    const n = TOTAL_CONTENT;
    for(let i=0;i<n;i++){
      const k = i + 0.5;
      const phi = Math.acos(1 - 2*k/n);
      const theta = Math.PI * (1 + Math.sqrt(5)) * k;
      const x = Math.cos(theta) * Math.sin(phi);
      const y = Math.cos(phi);
      const z = Math.sin(theta) * Math.sin(phi);
      contentPoints.push({x,y,z});
    }
  })();

  let rotX2 = -0.3, rotY2 = 0, dragging2 = false, last2 = {x:0,y:0}, inertia2 = {x:0,y:0};

  function rotateVec2(v){
    const cosX = Math.cos(rotX2), sinX = Math.sin(rotX2);
    const cosY = Math.cos(rotY2), sinY = Math.sin(rotY2);
    let y = v.y * cosX - v.z * sinX;
    let z = v.y * sinX + v.z * cosX;
    let x = v.x * cosY + z * sinY;
    z = -v.x * sinY + z * cosY;
    return {x,y,z};
  }

  function positionNodes2(){
    const children = Array.from(ring2.querySelectorAll('.node'));
    // Place all nodes on the sphere using fibonacci sphere math
    const bounds = orbit2.getBoundingClientRect();
    const R = Math.min(bounds.width, bounds.height) * 0.38;
    // We'll collect depth info and re-append nodes in depth order so the
    // front-most nodes are painted last (avoids transform/z-index inconsistencies).
    const depthList = [];
    children.forEach((el, i) => {
      // Use fibonacci sphere points for 3D effect
      const v = rotateVec2(contentPoints[i]);
      const x = v.x * R;
      const y = v.y * R;
      const z = v.z * R;
      const scale = 0.65 + 0.35 * ((z + R) / (2 * R));
      el.style.transform = `translate3d(calc(-50% + ${x}px), calc(-50% + ${y}px), ${z}px)`;
      // keep zIndex as a fallback but rely on DOM order for painting
      el.style.zIndex = 1000 + Math.round(z);
      el.firstChild.style.transform = `scale(${scale.toFixed(3)})`;
      el.style.opacity = 0.3 + 0.7 * ((z + R) / (2 * R));
      depthList.push({ el, z });
    });
    // sort by depth ascending and append in that order (furthest first)
    depthList.sort((a,b)=>a.z - b.z);
    depthList.forEach(item => ring2.appendChild(item.el));
    // Show all cards below the wheel for accessibility
    const accessibleCards = document.getElementById('accessibleCards');
    accessibleCards.innerHTML = contentNodes.map(node => `<div class='card'>${node.card}</div>`).join('');
    // Ensure anchors inside accessible cards behave like the working download CTA.
    // Idempotent wiring: mark anchors with data-wired to avoid duplicate handlers.
    (function wireAccessibleCardLinks(){
      if(!accessibleCards) return;
      const anchors = accessibleCards.querySelectorAll('a');
      anchors.forEach(a=>{
        if(a.dataset.wired) return;
        a.dataset.wired = '1';
        function openAnchorViaJS(ev) {
          try {
            ev.preventDefault && ev.preventDefault();
          } catch(e){}
          ev.stopPropagation && ev.stopPropagation();
          const href = a.getAttribute('href');
          const target = a.getAttribute('target') || '_self';
          if(!href) return;
          try { window.open(href, target); } catch(e) { location.href = href; }
        }
        // Use pointerdown which fires before pointer capture interferes with clicks.
        a.addEventListener('pointerdown', openAnchorViaJS);
        // Fallback for browsers that don't support pointer events
        a.addEventListener('mousedown', openAnchorViaJS);
      });
    })();
  }

  // Open a content panel for a given content node index
  function openContent(index, anchor){
    const container = document.getElementById('panel-content-inner');
    if(!container) return;
    container.innerHTML = contentNodes[index].card;
    openPanel('#panel-content', anchor);
  }

  // Add drag and inertia for bottom sphere
  function onDown2(e){ dragging2=true; last2.x=e.clientX; last2.y=e.clientY; inertia2.x=0; inertia2.y=0; orbit2.setPointerCapture(e.pointerId); orbit2.classList.add('is-dragging');}
  function onMove2(e){ if(!dragging2) return; const dx=e.clientX-last2.x, dy=e.clientY-last2.y; last2.x=e.clientX; last2.y=e.clientY; rotY2 += dx*0.005; rotX2 += dy*0.005; inertia2.x = dx*0.005; inertia2.y = dy*0.005; positionNodes2();}
  function onUp2(e){ dragging2=false; orbit2.releasePointerCapture(e.pointerId); orbit2.classList.remove('is-dragging'); }

  function animate2(){
    rotX2 += (inertia2.y *= 0.94) * 0.3;
    rotY2 += (inertia2.x *= 0.94) * 0.3;
    positionNodes2();
    requestAnimationFrame(animate2);
  }

  function buildRing2(){
    ring2.innerHTML = '<div class="ring-bg" id="ringBg2"></div>';
    for(let i=0;i<TOTAL_CONTENT;i++){
      const el = document.createElement('div');
      el.className = 'node';
      el.setAttribute('data-index', i);
      // Create a button that opens the content panel (preserves card anchors)
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.style.width = '84px';
      btn.style.height = '84px';
      btn.style.borderRadius = '50%';
      btn.style.overflow = 'hidden';
      btn.style.padding = '0';
      btn.style.border = 'none';
      btn.style.background = 'transparent';
      // Add image inside button
      const img = document.createElement('img');
      img.src = contentNodes[i].icon;
      img.alt = '';
      img.style.width = '100%';
      img.style.height = '100%';
      img.style.objectFit = 'cover';
      img.style.borderRadius = '50%';
      btn.appendChild(img);
      btn.addEventListener('click', (ev)=>{
        ev.stopPropagation();
        openContent(i, el);
      });
      el.appendChild(btn);
      ring2.appendChild(el);
    }
    positionNodes2();
  }

  buildRing2();
  animate2();
  addEventListener('resize', ()=>{positionNodes2()});
  orbit2.addEventListener('pointerdown', onDown2);
  orbit2.addEventListener('pointermove', onMove2);
  orbit2.addEventListener('pointerup', onUp2);
  </script>

  <script>
  // ===== 1) LIVING BACKGROUND (particle flowfield) =====
  const bg = document.getElementById('bg');
  const g = bg.getContext('2d');
  let W, H, dpr, particles, t = 0, mouse = {x:0,y:0, active:false};

  function resize(){
    dpr = Math.min(2, window.devicePixelRatio || 1);
    W = bg.width = innerWidth * dpr;
    H = bg.height = innerHeight * dpr;
    bg.style.width = innerWidth + 'px';
    bg.style.height = innerHeight + 'px';
    initParticles();
  }

  function initParticles(){
    const count = Math.floor((W*H) / (22000 * dpr));
    particles = new Array(count).fill().map(()=>({
      x: Math.random()*W,
      y: Math.random()*H,
      v: 0,
      a: 0,
      s: 0.7 + Math.random()*1.1
    }));
  }

  function noise(x,y){
    return Math.sin(x*0.0009 + t*0.002) + Math.cos(y*0.0012 - t*0.002);
  }

  function tick(){
    t+=1;
    g.clearRect(0,0,W,H);

    g.globalCompositeOperation = 'lighter';
    for(const p of particles){
      const n = noise(p.x, p.y);
      const angle = n * Math.PI;
      const force = 0.6;

      p.a += (angle - p.a)*0.08;
      p.v += force * 0.6;

      if(mouse.active){
        const dx = (mouse.x*dpr - p.x), dy = (mouse.y*dpr - p.y);
        const d = Math.hypot(dx,dy) + 0.0001;
        const pull = Math.min(1.5, 40/d);
        p.x += dx * pull * 0.008;
        p.y += dy * pull * 0.008;
      }

      p.x += Math.cos(p.a) * p.v * 0.08;
      p.y += Math.sin(p.a) * p.v * 0.08;
      p.v *= 0.92;

      if(p.x<0) p.x+=W; if(p.x>W) p.x-=W; if(p.y<0) p.y+=H; if(p.y>H) p.y-=H;

      g.beginPath();
      g.arc(p.x, p.y, p.s, 0, Math.PI*2);
      const grad = g.createRadialGradient(p.x, p.y, 0, p.x, p.y, 16);
      grad.addColorStop(0, 'rgba(108,99,255,.45)'); // accent indigo
      grad.addColorStop(1, 'rgba(108,99,255,0)');
      g.fillStyle = grad;
      g.fill();
    }
    requestAnimationFrame(tick);
  }

  addEventListener('resize', resize);
  bg.addEventListener('pointermove', e=>{mouse.x=e.clientX;mouse.y=e.clientY});
  bg.addEventListener('pointerdown', ()=>mouse.active=true);
  bg.addEventListener('pointerup', ()=>mouse.active=false);
  resize(); tick();

  // ===== 2) ICON SPHERE (DOUBLED ICON COUNT) =====
  const ICON_URL_1 = 'https://passghost.github.io/OrbiqWebsite/Images/SphereIcon.png';
  const ICON_URL_2 = 'https://passghost.github.io/OrbiqWebsite/Images/krakenicon2.png';

  const ring = document.getElementById('ring');
  const ringBg = document.getElementById('ringBg');
  const orbit = document.getElementById('orbit');

  const baseNodes = [
    {label:'Projects', panel:'#panel-projects'},
    {label:'Experiments', panel:'#panel-experiments'},
    {label:'Tools', panel:'#panel-tools'},
    {label:'Contact', panel:'#panel-contact'},
  ];

  const TOTAL_ICONS = 32; // doubled from 16 → 32
  const nodes = [];
  for(let i=0;i<TOTAL_ICONS;i++){
    nodes.push({
      ...baseNodes[i % baseNodes.length],
      icon: i % 2 === 0 ? ICON_URL_1 : ICON_URL_2
    });
  }

  // Build fibonacci sphere points
  const points = [];
  (function buildSphere(){
    const n = TOTAL_ICONS;
    for(let i=0;i<n;i++){
      const k = i + 0.5;
      const phi = Math.acos(1 - 2*k/n);
      const theta = Math.PI * (1 + Math.sqrt(5)) * k;
      const x = Math.cos(theta) * Math.sin(phi);
      const y = Math.cos(phi);
      const z = Math.sin(theta) * Math.sin(phi);
      points.push({x,y,z});
    }
  })();

  let rotX = -0.3, rotY = 0; // free rotation
  let dragging = false, last = {x:0,y:0}, inertia = {x:0,y:0};

  // Floating mode variables
  let floatMode = true;
  let floatTimeout = null;
  const floatStates = Array(TOTAL_ICONS).fill().map(() => ({
    x: 0, y: 0, vx: 0, vy: 0, speed: 0, angle: 0
  }));

  function startFloatMode() {
    floatMode = true;
    // Randomize float states
    const bounds = orbit.getBoundingClientRect();
    const R = Math.min(bounds.width, bounds.height) * 0.42;
    for (let i = 0; i < TOTAL_ICONS; i++) {
      // Start near orb position
      const v = rotateVec(points[i]);
      floatStates[i].x = v.x * R;
      floatStates[i].y = v.y * R;
      floatStates[i].angle = Math.random() * Math.PI * 2;
      floatStates[i].speed = 0.8 + Math.random() * 1.2;
      floatStates[i].vx = Math.cos(floatStates[i].angle) * floatStates[i].speed;
      floatStates[i].vy = Math.sin(floatStates[i].angle) * floatStates[i].speed;
    }
    positionNodes();
  }

  function stopFloatMode() {
    floatMode = false;
    positionNodes();
  }

  function scheduleFloatResume() {
    if (floatTimeout) clearTimeout(floatTimeout);
    floatTimeout = setTimeout(() => {
      startFloatMode();
    }, 5000);
  }


  // Animate icons back to orb positions with a visible transition
  let snapAnimating = false;
  function positionNodes(snapBack = false) {
    const children = Array.from(ring.querySelectorAll('.node'));
    const bounds = orbit.getBoundingClientRect();
    const R = Math.min(bounds.width, bounds.height) * 0.42;

    let hitIdx = -1, hitScore = 0;

    children.forEach((el, i) => {
      let x, y, z, scale, opacity, v;
      if (floatMode) {
        // Floating mode: update position
        floatStates[i].x += floatStates[i].vx;
        floatStates[i].y += floatStates[i].vy;
        if (floatStates[i].x > R) floatStates[i].vx *= -1;
        if (floatStates[i].x < -R) floatStates[i].vx *= -1;
        if (floatStates[i].y > R) floatStates[i].vy *= -1;
        if (floatStates[i].y < -R) floatStates[i].vy *= -1;
        x = floatStates[i].x;
        y = floatStates[i].y;
        z = Math.sqrt(Math.max(0, R * R - x * x - y * y));
        scale = 0.65 + 0.35 * ((z + R) / (2 * R));
        opacity = 0.3 + 0.7 * ((z + R) / (2 * R));
        v = rotateVec(points[i]);
      } else {
        // Orb mode: regular sphere
        v = rotateVec(points[i]);
        x = v.x * R;
        y = v.y * R;
        z = v.z * R;
        scale = 0.65 + 0.35 * ((z + R) / (2 * R));
        opacity = 0.3 + 0.7 * ((z + R) / (2 * R));
        // Animate back to orb position (ease)
        // Make snap-back faster for visible transition
        const snapSpeed = snapBack ? 0.08 : 0.03;
        floatStates[i].x += (x - floatStates[i].x) * snapSpeed;
        floatStates[i].y += (y - floatStates[i].y) * snapSpeed;
        x = floatStates[i].x;
        y = floatStates[i].y;
      }
      el.style.transform = `translate3d(calc(-50% + ${x}px), calc(-50% + ${y}px), ${z}px)`;
      el.style.zIndex = 1000 + Math.round(z);
      el.firstChild.style.transform = `scale(${scale.toFixed(3)})`;
      el.style.opacity = opacity;
      el.firstChild.style.border = 'none';
      el.firstChild.style.boxShadow = 'none';
      el.firstChild.style.outline = 'none';

      const rightness = Math.max(0, (v.x + 1) / 2);
      const frontness = Math.max(0, (v.z + 1) / 2);
      const s = Math.pow(rightness, 3) * frontness;
      if (s > hitScore) { hitScore = s; hitIdx = i; }
    });

    children.forEach(c => c.classList.remove('hit'));
    const bgEl = document.getElementById('ringBg');
    bgEl.classList.remove('show');
  }

  // Animate snap-back after user interaction
  function animateSnapBack() {
    let snapFrames = 0;
    snapAnimating = true;
    function snapStep() {
      positionNodes(true);
      snapFrames++;
      // Stop after ~30 frames (~0.5s at 60fps)
      if (snapFrames < 30) {
        requestAnimationFrame(snapStep);
      } else {
        snapAnimating = false;
      }
    }
    snapStep();
  }

  function rotateVec(v){
    // rotate around X then Y
    const cosX = Math.cos(rotX), sinX = Math.sin(rotX);
    const cosY = Math.cos(rotY), sinY = Math.sin(rotY);
    let y = v.y * cosX - v.z * sinX;
    let z = v.y * sinX + v.z * cosX;
    let x = v.x * cosY + z * sinY;
    z = -v.x * sinY + z * cosY;
    return {x,y,z};
  }

  function onDown(e){ dragging=true; last.x=e.clientX; last.y=e.clientY; inertia.x=0; inertia.y=0; orbit.setPointerCapture(e.pointerId); orbit.classList.add('is-dragging'); }
  function onMove(e){ if(!dragging) return; const dx=e.clientX-last.x, dy=e.clientY-last.y; last.x=e.clientX; last.y=e.clientY; rotY += dx*0.005; rotX += dy*0.005; inertia.x = dx*0.005; inertia.y = dy*0.005; positionNodes(); }
  function onUp(e){ dragging=false; orbit.releasePointerCapture(e.pointerId); orbit.classList.remove('is-dragging'); }

  function animate(){
    if(!floatMode){
      rotX += (inertia.y *= 0.94) * 0.3;
      rotY += (inertia.x *= 0.94) * 0.3;
    }
    // Flex/rotate the GIF background with the orb — slower, and scale ramps with drag/inertia
    if (ringBg) {
      const inertiaMag = Math.min(1, Math.hypot(inertia.x, inertia.y) * 8);
      const baseScale = 1 + Math.sin(rotY) * 0.03 + Math.cos(rotX) * 0.03;
      const dragScale = 1 + inertiaMag * 0.12; // ramp up to ~1.12 under strong drag
      const scale = baseScale * dragScale;
      const rotate = rotY * 8; // slower rotation
      ringBg.style.setProperty('--bg-scale', scale.toFixed(3));
      ringBg.style.setProperty('--bg-rotate', rotate.toFixed(3) + 'deg');
    }
    // Also update second orb background if present (use its own inertia2/rotY2)
    const ringBg2El = document.getElementById('ringBg2');
    if (ringBg2El) {
      const inertiaMag2 = Math.min(1, Math.hypot(inertia2.x||0, inertia2.y||0) * 8);
      const baseScale2 = 1 + Math.sin(rotY2) * 0.03 + Math.cos(rotX2) * 0.03;
      const dragScale2 = 1 + inertiaMag2 * 0.12;
      const scale2 = baseScale2 * dragScale2;
      const rotate2 = rotY2 * 8;
      ringBg2El.style.setProperty('--bg-scale', scale2.toFixed(3));
      ringBg2El.style.setProperty('--bg-rotate', rotate2.toFixed(3) + 'deg');
    }
    positionNodes();
    // Draw particle system lines from home to floating position, behind icons
    // Always draw trails with a flexing joint
    g.save();
    g.setTransform(1,0,0,1,0,0);
    g.globalAlpha = 0.45;
    const bounds = orbit.getBoundingClientRect();
    const orbCenterX = (bounds.left + bounds.width/2) * dpr;
    const orbCenterY = (bounds.top + bounds.height/2) * dpr;
    const R = Math.min(bounds.width, bounds.height) * 0.42 * dpr;
    for (let i = 0; i < TOTAL_ICONS; i++) {
      // Home position (on sphere)
      const v = rotateVec(points[i]);
      const hx = orbCenterX + v.x * R;
      const hy = orbCenterY + v.y * R;
      // Current floating position
      const fx = orbCenterX + floatStates[i].x * dpr;
      const fy = orbCenterY + floatStates[i].y * dpr;
      // Only draw trail if icon is not at home position
      const dist = Math.hypot(fx - hx, fy - hy);
      if (dist > 2 * dpr) {
        // Joint position: 40% along the line, flexed by a sine offset
        const t = 0.4;
        const jx = hx + (fx - hx) * t;
        const jy = hy + (fy - hy) * t;
        // Flex offset (per icon, animated)
        const flexMag = 32 * dpr;
        const flexAngle = Math.atan2(fy - hy, fx - hx) + Math.sin(Date.now()/400 + i) * 0.7;
        const jxFlex = jx + Math.cos(flexAngle + Math.PI/2) * flexMag;
        const jyFlex = jy + Math.sin(flexAngle + Math.PI/2) * flexMag;
        // Draw trail: home -> joint -> floating
        g.beginPath();
        g.moveTo(hx, hy);
        g.lineTo(jxFlex, jyFlex);
        g.lineTo(fx, fy);
        // Neon gradient for elbow trails
        const grad = g.createLinearGradient(hx, hy, fx, fy);
        grad.addColorStop(0, '#00fff7'); // neon cyan
        grad.addColorStop(0.5, '#6C63FF'); // neon indigo
        grad.addColorStop(1, '#48ff00'); // neon green
        g.strokeStyle = grad;
        g.lineWidth = 7;
        g.shadowColor = '#00fff7';
        g.shadowBlur = 32;
        g.stroke();
        // Draw a bright neon elbow particle (no blur)
        g.save();
        g.globalAlpha = 0.95;
        g.beginPath();
        g.arc(jxFlex, jyFlex, 13 * dpr, 0, Math.PI*2);
        const elbowGrad = g.createRadialGradient(jxFlex, jyFlex, 0, jxFlex, jyFlex, 13 * dpr);
        elbowGrad.addColorStop(0, '#00fff7');
        elbowGrad.addColorStop(0.5, '#6C63FF');
        elbowGrad.addColorStop(1, 'rgba(0,255,247,0)');
        g.fillStyle = elbowGrad;
        g.shadowColor = 'transparent';
        g.shadowBlur = 0;
        g.fill();
        g.restore();
        // Draw icon at joint, scale and blur based on size
        const iconImg = new Image();
        iconImg.src = nodes[i].icon;
        // Calculate scale based on z (depth)
        let iconScale = 0.65 + 0.35 * ((v.z + R) / (2 * R));
        let iconSize = 18 * dpr * iconScale;
        // Blur: max blur at smallest, none at largest
        let blurAmount = Math.max(0, 16 * (1 - iconScale));
        g.save();
        g.globalAlpha = 0.35;
        if (blurAmount > 0) {
          g.filter = `blur(${blurAmount}px)`;
        } else {
          g.filter = 'none';
        }
        g.drawImage(iconImg, jxFlex - iconSize/2, jyFlex - iconSize/2, iconSize, iconSize);
        g.filter = 'none';
        g.restore();
      }
    }
    g.restore();
    requestAnimationFrame(animate);
  }

  function buildRing(){
    ring.innerHTML = '<div class="ring-bg" id="ringBg"></div>';
    for(let i=0;i<TOTAL_ICONS;i++){
      const el = document.createElement('div');
      el.className = 'node';
      el.setAttribute('data-index', i);

      const btn = document.createElement('button');
      btn.setAttribute('type','button');
      btn.style.backgroundImage = `url(${nodes[i].icon})`;
      // Remove label creation for first orb
      // const label = document.createElement('span');
      // label.className = 'label';
      // label.textContent = nodes[i].label;
      // btn.appendChild(label);
      btn.addEventListener('click', ()=>openPanel(nodes[i].panel, el));

      el.appendChild(btn);
      ring.appendChild(el);
    }
    positionNodes();
  }

  buildRing();
  startFloatMode();
  animate();
  addEventListener('resize', ()=>{positionNodes()});


  function triggerSnapBack() {
    stopFloatMode();
    scheduleFloatResume();
    if (!snapAnimating) animateSnapBack();
  }

  orbit.addEventListener('pointerdown', e => {
    triggerSnapBack();
    onDown(e);
  });
  orbit.addEventListener('pointermove', e => {
    triggerSnapBack();
    onMove(e);
  });
  orbit.addEventListener('pointerup', e => {
    triggerSnapBack();
    onUp(e);
  });


  addEventListener('keydown', (e) => {
    triggerSnapBack();
    if (e.key === 'ArrowRight') { rotY += 0.2; }
    else if (e.key === 'ArrowLeft') { rotY -= 0.2; }
    else if (e.key === 'ArrowUp') { rotX -= 0.2; }
    else if (e.key === 'ArrowDown') { rotX += 0.2; }
    else if (e.key === 'Escape') { closeAllPanels(); }
    positionNodes();
  });

  // Resume float mode after 15s of no mouse movement
  let lastMouseMove = Date.now();

  function onUserInput() {
    triggerSnapBack();
    lastMouseMove = Date.now();
  }
  document.addEventListener('mousemove', onUserInput);
  document.addEventListener('mousedown', onUserInput);
  document.addEventListener('touchstart', onUserInput);
  document.addEventListener('pointermove', onUserInput);

  // ===== 3) PANELS =====
  const panels = document.querySelectorAll('.panel');

  function openPanel(selector, anchor){
    const p = document.querySelector(selector);
    const rect = anchor.getBoundingClientRect();
    p.style.setProperty('--x', ((rect.left + rect.width/2) / innerWidth * 100).toFixed(2) + '%');
    p.style.setProperty('--y', ((rect.top + rect.height/2) / innerHeight * 100).toFixed(2) + '%');
    p.classList.add('open');
  }
  function closeAllPanels(){ panels.forEach(p=>p.classList.remove('open')); }
  document.querySelectorAll('[data-close]').forEach(btn=>btn.addEventListener('click', closeAllPanels));
  document.getElementById('contactOpen').addEventListener('click', ()=>openPanel('#panel-contact', document.querySelector('.cta')));

  // ===== 4) Misc =====
  document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
